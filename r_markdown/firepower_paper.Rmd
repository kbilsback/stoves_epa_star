---
title: "Figures for Firepower Sweep Paper"
output:
  html_document:
    toc: true
    toc_float: true
    theme: paper
---

```{r load_libraries, echo=FALSE, message=FALSE}
  library(tidyverse)
```

```{r global_options, include=FALSE}
  knitr::opts_chunk$set(fig.path='figures/', warning=FALSE, message=FALSE, cache=FALSE)
```

```{r load_data}
  # load data
  lab_grav <- readRDS("../r_files/lab_grav_merged.RDS")
```

```{r load_functions}
  # load functions
  source("../r_scripts/lab_model_metrics.R")
  source("../r_scripts/functions.R")
```

```{r load_meta}
  # load metadata
  lab_samples <- readRDS("../r_files/lab_meta.RDS")
```

```{r}
  # select bc emissions rate as outcome
  # merge with metadata
  # select only wood tests
  # filter out Okote tests
  lab_data <- lab_grav %>%
              dplyr::select(-units) %>%
              tidyr::spread(var, val) %>% 
              dplyr::select(id, sample_id, fp, mce) %>%
              dplyr::left_join(lab_samples, by = "id") %>%
              dplyr::filter(fuel != "Okote") %>%
              dplyr::filter(fuel_type == "wood") %>%
              dplyr::filter(!is.na(bc_ef), !is.na(fp), !is.na(mce))
```